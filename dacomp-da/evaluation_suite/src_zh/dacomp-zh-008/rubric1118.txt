# [总分 | 30分]  解决方案需满足以下两个核心需求：
- 需求1：不同项目类型的成本偏差与分布
- 需求2：成本偏差与团队规模/风险等级/客户满意度的联系
---
## 需求1：不同项目类型的成本偏差与分布（本需求最高可得 15分）
目标：在统一口径下，计算并对比**各项目类型**的成本偏差统计与分布形态，识别离群点与不稳定类型，并给出可核验结果。
### 标准1.1：数据口径与清洗（最高3分）
#### 路径1.1.A [3分 | 字段映射 + 清洗 + 记录日志]
- 小标准1.1.A.1 [1分 | 完备性]: 明确并列出原始字段→分析字段的映射表：
  - 预算金额(`budget_amount`)、实际成本(`actual_cost`)、项目类型(`project_type`)、团队规模(`team_size`)、风险等级(`risk_level` 需转序数：低=1/中=2/高=3)、客户满意度(`csat` 需转0–10)。
  - 新增**成本偏差**字段：`cost_dev = budget_amount - actual_cost`。
  - 随机抽样5条，手工复算 `budget - actual`；校对映射表是否覆盖100%必需字段。
  - 合格阈值：抽样5条复算**误差=0**；映射表覆盖率=100%。
- 小标准1.1.A.2 [1分 | 精确性]: 异常/缺失处理
  - 伪算法：
    1) 将金额、团队规模、满意度强制转数值（无法转换→NA）；
    2) 删除预算或实际缺失记录；
    3) 对`cost_dev`做**Winsorize at 1%/99%**（或 z≥±3 剔除），保留剔除比例；
    4) 记录清洗日志（删除条数、原因、阈值）。
  - 输出“清洗报告”含：剔除比例、winsor区间、剩余样本量。
  - 合格阈值：剔除比例≤5%；若>5%，需在报告内写明原因与影响评估（计分不扣，但必须给出）。
- 小标准1.1.A.3 [1分 | 完备性]: 版本与复现
  - 固定随机种子（如`seed=2025`）、记录代码版本/执行时间/输入文件md5。
  - 产出“复现信息块”（种子、md5、样本量、时间）。
  - 合格阈值：复现信息块齐全。
---
### 标准1.2：类型分组统计（最高6分）
#### 路径1.2.A [6分 | 描述统计 + 锚点核验]
- 小标准1.2.A.1 [1分 | 完备性]: 按`project_type`分组计算：
  - 指标：mean/median/std/count/IQR/95%CI（均值的正态近似或bootstrap）。
  - 表头统一命名并含单位（万元/元，需明确）。
  - 检查是否**每个类型**均有上述6列；单位一致。
  - 合格阈值：6列全有；单位说明清楚。
- 小标准1.2.A.2 [3分 | 精确性]: 锚点值核验
  - 锚点（来自先验结果，允许±区间）：
    - 基础设施：**均值≈+62 万**（允许误差±5%）；
    - 软件开发：**均值≈+59 万**（±5%）；
    - 营销推广：**均值≈+9 万**（±5%）。
  - 计算各类型的`mean(cost_dev)`；若单位非“万元”，需换算。
  - 对照锚点±5%区间（如62万的5%即±3.1万）。
  - 合格阈值：均值全部落在区间内；若不在，必须在结果中**显式解释**（如样本结构不同、清洗阈值不同）。对一个得一分。
- 小标准1.2.A.3 [2分 | 精确性]: 稳健性（中位数 vs 均值）
  - 比较`mean`与`median`差异占`std`比例。
  - 若 |mean-median|/std > 0.3，标记“偏斜”并在结论中说明。
  - 合格阈值：完成计算与标注；无强制阈值但必须报告。对一项给一分。
---
### 标准1.3：分布与离群（最高3分）
#### 路径1.3.A [3分 | 直方图 + 箱线图 + 离群表]
- 小标准1.3.A.1 [1分 | 完备性]: 图形产出
  - 全体成本偏差直方图（Freedman-Diaconis或Sturges分箱法，标注bin宽）；
  - 分类型箱线图（显示中位数、IQR、须、离群点）。
  - 图上需有**标题/轴单位/图例**；导出为PNG/SVG。
  - 合格阈值：两类图都生成，元素齐全。
- 小标准1.3.A.2 [1分 | 精确性]: 离群识别
  - 伪算法：对每类型t，按 IQR 规则：
    - Q1, Q3, IQR=Q3-Q1；
    - 下界=Q1-1.5*IQR，上界=Q3+1.5*IQR；
    - 标记超界样本，导出“离群清单”。
  - 抽检1个类型，手算3个样本的离群判定=程序一致。
  - 合格阈值：一致率=100%。
- 小标准1.3.A.3 [1分 | 结论性]: 分布形态的所有可能结论（必须列齐其判定条件）
  - 可能结论（至少选择与结果匹配的一条并加粗）：
    1) **右偏（多数节省，少数超支极端）**：判定条件 = 均值>中位数 且 右尾超过上界样本占比>1%；
    2) **左偏（多数超支，少数大额节省）**：均值<中位数 且 左尾超过下界样本占比>1%；
    3) **近似对称**：|均值-中位数|/std ≤ 0.1 且 双尾离群占比均<1%；
    4) **重尾**：超出±3σ或IQR规则离群占比≥2%。
  - 合格阈值：明确给出哪一种结论及其**满足的条件**（写入报告文本）。
---
### 标准1.4：类型间显著性与排序（最高3分）
#### 路径1.4.A [3分 | 方差检验 + 事后比较 或 非参检验]
- 小标准1.4.A.1 [1分 | 完备性]: 方法选择
  - 若正态/方差齐：单因素ANOVA + Tukey HSD；
  - 否则：Kruskal-Wallis + Dunn-Bonferroni。
  - 报告中写明正态与齐性检验（Shapiro、Levene）结果与方法择优理由。
  - 合格阈值：四步齐全（正态/齐性/主检验/事后）。
- 小标准1.4.A.2 [1分 | 精确性]: 统计量与p值
  - 输出 F或H 统计量、df、p值、效应量（η²或ε²）。
  - 合格阈值：完整四元组：统计量、自由度、p、效应量；p<0.05判显著。
- 小标准1.4.A.3 [1分 | 结论性]: **所有可能的排序结论**（写清触发条件）
  - 可能排序（任选与实际匹配的一条并标明证据）：
    - **基础设施 ≈ 软件开发 > 营销推广**：Tukey/Dunn 显著（两两p<0.05）；
    - **基础设施 > 软件开发 > 营销推广**：三两两对比均显著；
    - **基础设施 >（软件开发≈营销推广）**：前两类差异显著，后两类不显著；
    - **三类不显著**：主检验p≥0.05。
  - 合格阈值：结论后括注（对应p值/CI/效应量）。
---
## 需求2：成本偏差与团队规模/风险等级/客户满意度的联系（本需求最高可得 15分）
### 标准2.1：相关性与方向一致性（最高5分）
#### 路径2.1.A [5分 | 双指标相关 + 置信区间]
- 小标准2.1.A.1 [1分 | 完备性]: 生成 3×3 相关矩阵（`cost_dev`, `team_size`, `csat`），同时给出 Spearman。
  - 对角线=1；上三角/下三角一致。
  - 合格阈值：两个矩阵（Pearson/Spearman）都必须输出。
- 小标准2.1.A.2 [3分 | 精确性]: **锚点值核验**
  - 锚点（允许误差±0.05）：
    - `corr(cost_dev, team_size)` **≈ +0.42 ± 0.05**；
    - `corr(cost_dev, csat)` **≈ -0.22 ± 0.05**；
    - `corr(cost_dev, risk_level)` **≈ +0.25 ± 0.05**（若做在2.2模型亦可核）。
  - 逐项对照；若不在区间，需**解释差异来源**（清洗、样本）。
  - 合格阈值：至少两个相关锚点落区间内；第三个不在需解释。对一个得一分。
- 小标准2.1.A.3 [1分 | 结论性]: **所有可能方向结论**（每条结论需有判断门槛）
  - 可选并需标注证据的一条或多条：
    - **正相关**：r≥+0.2 且 p<0.05；
    - **负相关**：r≤-0.2 且 p<0.05；
    - **弱或无相关**：|r|<0.2 或 p≥0.05；
    - **非线性单调**：Spearman>|Pearson|+0.1，且散点呈单调弯曲。
  - 合格阈值：写明“采纳了哪一条”及其门槛满足情况（r、p）。
---
### 标准2.2：分层/分组与风险等级效应（最高5分）
#### 路径2.2.A [5分 | 风险等级箱线 + 均值表 + 单调性检验]
- 小标准2.2.A.1 [1分 | 完备性]: 可视与表格
  - 画 `risk_level` ∈ {低(1), 中(2), 高(3)} 的箱线图；
  - 输出各档 `mean/median/count/95%CI`。
  - 三档都有；CI计算方法说明。
  - 合格阈值：图+表均生成。
- 小标准2.2.A.2 [3分 | 精确性]: **均值锚点核验**
  - 锚点（±10%）：
    - 低风险：**≈ 12 万**；
    - 中风险：**≈ 100 万**；
    - 高风险：**≈ 34 万**。
  - 分别对照；若一档超界须解释（样本分布不同、winsor阈值等）。
  - 合格阈值：至少两档在区间；第三档需解释。对一个得一分。
- 小标准2.2.A.3 [1分 | 结论性]: **所有可能序关系**（给判定条件）
  - **中>高>低**：均值中>高>低 且 至少两对比较p<0.05；
  - **中>（高≈低）**：中与其余均显著，后两者不显著；
  - **高>中>低** 或 **低>中>高**：同理给出两两检验证据；
  - **不可判（不显著）**：任一关键对 p≥0.05。
  - 合格阈值：选择与实际相符的一条，并附p值/CI证据。
---
### 标准2.3：多变量建模（可解释或稳健）（最高3分）
#### 路径2.3.A [3分 | 线性模型（OLS + 类型哑变量）]
- 小标准2.3.A.1 [1分 | 完备性]: 模型设定
  - `cost_dev ~ team_size + csat + risk_level + C(project_type)`；报告R²/Adj.R²、各系数、SE、t、p、VIF<5。
  - 回归表齐全；诊断（残差正态/异方差 White/BP）。
  - 合格阈值：报告完整+诊断一次。
- 小标准2.3.A.2 [1分 | 精确性]: 方向与显著性
  - 预期方向（与相关一致）：team_size(+)；csat(-)；risk_level(+)；
  - 合格阈值：若方向与相关一致 且 至少1个核心变量p<0.05。
- 小标准2.3.A.3 [1分 | 结论性]: 可能模型结论全集（择其一并给证据）
  - **规模正效应为主**：team_size β>0, p<0.05；
  - **满意度负效应为主**：csat β<0, p<0.05；
  - **风险正效应为主**：risk_level β>0, p<0.05；
  - **多因子共同显著**：≥2个核心变量 p<0.05；
  - **不显著**：全部 p≥0.05（需说明样本/噪声）。
  - 合格阈值：给出所选结论及对应β/SE/p。
#### 路径2.3.B [3分 | 稳健回归（Huber/Tukey或分位数回归τ∈{0.25,0.5,0.75}）]
- 评分同2.3.A，但需报告鲁棒损失/分位数系数与置信区间。
---
### 标准2.4：从统计到业务陈述（最高2分）
#### 路径2.4.A [2分 | 对齐统计证据的业务结论矩阵]
- 小标准2.4.A.1 [1分 | 完备性]: 四块内容全覆盖
  - 必须覆盖：
    1) 项目类型差异（谁更易节省/超支）；
    2) 团队规模影响（方向/阈值，如>30人后明显上升）；
    3) 风险等级差异（哪档波动/均值更高）；
    4) 客户满意度关系（提升满意度是否伴随更贴近预算或略超支）。
  - 合格阈值：四条皆有结论文字。
- 小标准2.4.A.2 [1分 | 结论性]: 每条结论都要**指向性+证据**
  - 示例格式（需与你的真实结果匹配）：
    - “**基础设施≈软件开发 > 营销推广**（Tukey，p<0.01；效应量η²=0.12）”；
    - “**团队规模与成本偏差正相关**（r=+0.42, p<0.01；OLS β=+X, p=Y）”；
    - “**中风险均值最高**（100万），高风险波动更大（IQR更宽）”；
    - “**满意度越高越接近预算**（r=-0.22, p=0.02；Spearman>|Pearson|提示非线性单调）”。
  - 合格阈值：每条均附统计证据（至少r/p或β/p）。
