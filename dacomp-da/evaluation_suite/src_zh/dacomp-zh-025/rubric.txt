# [总分 | 17分]解决方案需满足以下三个核心需求：
- 需求1：设定与口径
- 需求2：关键指标与“需下调量”计算（允许多种合理预测法，需把方法说清）
- 需求3：通过分析得出“明显需要下调”的SKU集合


## 需求1：设定与口径（本需求最高可得3分）

### 标准1.1：关键业务设定落地（最高2分）
#### 路径1.1.A（口径声明 + 计算对齐）[2分]
- 小标准1.1.A.1[1分｜完备性] 明确并在计算中落实：
  - a) 夏季=6–8月（或单看7月）；
  - b) 预测不使用“往年7/1单日”强约束；
  - c) 2023-07-01进货量=2023-06-30销量，采用6月平均数据时不得分。
本项需要同时满足以上三点才得分，否则0分
- 小标准1.1.A.2[1分｜结论性] 在最终说明中复述且自洽上述口径，前后一致、无矛盾。

### 标准1.2：字段映射与数据清洗（最高1分）
#### 路径1.2.A（数据治理流程化）[1分]
- 小标准1.2.A.1[1分｜完备性] 给出字段—含义对照（SKU、日期、销量kg、销售单价、批发价/进货价），并说明去除退货/作废/异常值策略。


## 需求2：关键指标与“需下调量”计算（本需求最高可得6分）

### 标准2.1：需求预测方法与执行（允许多种合理预测法）（最高3分）
#### 路径2.1.A（直接均值法）[3分]
- 小标准2.1.A.1[1分｜完备性] 逐SKU计算往年夏季平均销量；明确“有售日/全日”口径。
- 小标准2.1.A.2[2分｜精确性] 代码中实际计算逻辑与声明口径一致；代码可复核（代码校验方法）。

> 部分参考值如下，若出现相同口径的指标，则与参考答案不得相差0.5%，未出现则无需校验。

| 单品编码         | __name__               | S0630_kg  | 往年夏季（6-8月）平均销量_kg_有售日 | 往年夏季（6-8月）平均销量_kg_全日 | 夏季（6-8月）总销量_kg  | 夏季（6-8月）有售日天数 |
|------------------|------------------------|-----------|----------------------------|-------------------------|----------------|----------------|
| 102900011030059  | 云南生菜(份)           | 36.000    | 54.166667                  | 7.065217                | 1950.000        | 36             |
| 102900011016701  | 芜湖青椒(1)            | 15.896    | 32.129000                  | 21.186514               | 5847.478        | 182            |
| 102900011030097  | 云南油麦菜(份)         | 25.000    | 40.828571                  | 5.177536                | 1429.000        | 35             |
| 102900005116899  | 净藕(1)                | 6.440     | 19.673802                  | 16.893808               | 4662.691        | 237            |
| 102900005116714  | 西兰花                 | 16.900    | 30.009159                  | 26.747293               | 7382.253        | 246            |
| 102900011032848  | 姜蒜小米椒组合装(小份) | 9.000     | 4.044444                   | 0.659420                | 182.000         | 45             |
| 102900011031100  | 小米椒(份)             | 23.000    | 18.361111                  | 4.789855                | 1322.000        | 72             |
| 102900011001691  | 菱角                   | 3.396     | 1.271701                   | 0.308710                | 85.204          | 67             |
| 102900005115946  | 木耳菜                 | 5.185     | 3.586829                   | 2.508181                | 692.258         | 193            |
| 102900051000944  | 洪湖藕带               | 4.339     | 2.809420                   | 1.791514                | 494.458         | 176            |

#### 路径2.1.B（稳健统计法：中位数/分位修剪/加权均值等）[3分]
- 小标准2.1.B.1[1分｜完备性] 说明稳健策略（如P10–P90修剪均值、分位数回归、销量权重均值等）及理由。
- 小标准2.1.B.2[1分｜精确性] 按所述稳健策略实现并用于预测（代码校验方法）。
- 小标准2.1.B.3[1分｜结论性] 解释稳健策略对极端值/促销日的约束意义。

#### 路径2.1.C（时序/分解/平滑法：季节朴素、EWMA、ARIMA/STL等）[3分]
- 小标准2.1.C.1[1分｜完备性] 清楚描述所选模型（如季节朴素：取上年同周同星期、EWMA、ARIMA/季节分解），训练窗口（2021–2022夏季或更长）与避免泄漏的分割方式。
- 小标准2.1.C.2[1分｜精确性] 按所述方法实现预测，并给出最少一种合理验证（简易回测/滚动验证/残差检查）；以代码校验方法核验。
- 小标准2.1.C.3[1分｜结论性] 明确“最终预测=模型输出”，参数或超参设置有记录。

### 标准2.2：需下调量计算（按代码核验）（最高3分）
#### 路径2.2.A（通用差值法）[3分]
- 小标准2.2.A.1[1分｜完备性] 对每SKU计算：需调整量_kg = 预测(所选方法) − S0630_kg；筛出**需下调** 集合。
- 小标准2.2.A.2[2分｜精确性]
  - 单位/时间窗与分析中口径一致。参考代码校验方法。
  - 若采用稳健/时序法：依照代码校验方法核验“实现是否与自述方法完全一致、无泄漏、流程正确”。（此情形得1–2分，视实现质量给分）
#### 路径2.2.B（过量比例法）[3分]
- 小标准2.2.B.1[1分｜完备性] 对每SKU计算：过量比例 = 预测(所选方法) / S0630_kg -1（是否-1无所谓）；筛出**需下调** 集合。
- 小标准2.2.B.2[2分｜精确性]
  - 单位/时间窗与分析中口径一致。参考代码校验方法。
  - 若采用稳健/时序法：依照代码校验方法核验“实现是否与自述方法完全一致、无泄漏、流程正确”。（此情形得1–2分，视实现质量给分）

> 注：本需求不限定死“用平均值”，但必须清晰描述并按所述方法执行；否则不计分。


## 需求3：通过分析得出“明显需要下调”的SKU集合（本需求最高可得8分）

### 标准3.1：风险度量构建、计算+集合识别与结论（以亏本为主）（最高8分）
#### 路径3.1.A（亏本率 + 下调幅度的双指标体系）[8分]
- 小标准3.1.A.1[1分｜完备性] 明确亏本率计算（逐日判定、销量加权夏季聚合）的定义与单位。
- 小标准3.1.A.2[1分｜完备性] 明确下调幅度（|需调整量|or比例）的定义与单位。
- 小标准3.1.A.3[2分｜精确性] 两类度量计算正确（代码校验方法或对齐有参考意义的参考锚点）对一个給一分。
- 小标准3.1.A.4[1分｜完备性] 对亏本率指标给出明确规则（如 亏本率≥τ ）、阈值来源（业务红线/分位/σ倍数）。
- 小标准3.1.A.5[1分｜完备性] 对需下调幅度给出明确规则（如需调整量≤−δ），阈值来源（业务红线/分位/σ倍数））。
- 小标准3.1.A.6[2分｜结论性] 输出明显需要下调的集合明细并解释“高亏本概率 × 明显过量（或短保风险）”的业务意义。

#### 路径3.1.B（复合风险分：亏本主导的可加/可乘模型）[8分]
- 小标准3.1.B.1[2分｜完备性] 给出明确公式（例如 Risk = (-需调量or比例) × (1 + α·亏本率) 或加权秩和），并声明参数/权重（α或w）。
- 小标准3.1.B.2[2分｜精确性] 按所述公式计算风险分；参数写清并可复算（代码校验方法）。
- 小标准3.1.B.3[2分｜完备性] 基于3.1的风险分/秩分，说明阈值确定法（P80/Cliff/Elbow/KS/Youden J），并做简要敏感性（α∈[1,3]、cutoff±1分位）。
- 小标准3.1.B.4[2分｜结论性] 输出明显需要下调的集合并解释“风险暴露（概率×规模）最大”的优先级。

#### 路径3.1.C（统计阈度量：需求上界U或分位上界 + 亏本率）[8分]
- 小标准3.1.C.1[1分｜完备性] 定义并计算 U = μ + z·σ 或 Q90/Q95 等上界度量，并定义亏本率。
- 小标准3.1.C.2[1分｜完备性] 定义并计算亏本率。
- 小标准3.1.C.3[2分｜精确性] 正确计算 μ/σ/U（或分位）与亏本率（代码校验方法）。
- 小标准3.1.C.4[2分｜完备性] 两阶段：S0630>U（或>Q95等）判“超采”；在此集合中按亏本率≥τ2过滤；参数z/τ2来源与样本天数门槛明示。每阶段各一分。
- 小标准3.1.C.5[2分｜结论性] 输出明显需要下调的集合并说明“量的异常 × 价的风险”的风控意义与执行建议。

#### 路径3.1.D（历史销量分析：通过分析历史销量，推测出需要下调”的SKU）[4分]
- 小标准3.1.D.1[1分｜完备性] ：计算2023年6月30产品销量或6月日均销量；往年7月1产品销量或7月日均销量。若采用了2022年6月的数据也可接受，。
- 小标准3.1.D.2[1分｜完备性] ：对比二者销量数据的差异
- 小标准3.1.D.3[1分｜精确性] ：通过验证代码和计算逻辑，确认数据的准确性。
- 小标准3.1.D.4[1分｜结论性] ：给出多个需要下调的SKU，且给出的结论与数据相对应


## 补充说明
### 参考答案使用方法
如果出现了意义相同的指标，或者必须涉及的指标，则这些指标的答案必须与参考答案相近；如果指标意义不同，则不具备参考意义，须按照**代码校验方法**校验计算这些指标/数值的代码。

### 代码校验方法
适用于难以列出所有参考答案的情况，默认代码正确则答案正确。流程如下：
1. 通过阅读注释和快速浏览相关代码，校验代码整体逻辑是否符合分析中的思路；
2. 逐行校验，检查每行代码是否真能实现对应注释中描述的效果。
