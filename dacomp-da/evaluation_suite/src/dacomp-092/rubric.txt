# [Total Score | 60 Points] Customer Profit Volatility Risk Rating Scoring Rubric
---
## Requirement 1: High-Volatility Customer Segment Identification and Sample Validation (Up to 12 points for this requirement)
### Standard 1.1: Volatility Threshold Extraction and Account Alignment (Up to 12 points)
#### Path 1.1.A [12 Points | SQL/Python Combined Extraction]
- Sub-standard 1.1.A.1 [3 Points | Completeness]: State that the analysis is based on `quickbooks__profitability_analysis`, aggregating by `customer_id` with `MAX(customer_margin_volatility)`. List a field dictionary for subsequent calculations (including `customer_margin_volatility` → monthly gross profit volatility coefficient, `gross_profit` → individual gross profit, `invoice_total` → individual invoice amount, `transaction_date` → transaction date, `revenue_year`/`revenue_quarter` → reporting quarter labels). Must specify the sample reference date `MAX(transaction_date)=2025-10-14 00:00:00`, with the analysis window fixed to [2024-10-15, 2025-10-14].
- Sub-standard 1.1.A.2 [7 Points | Accuracy]: Validate `COUNT(DISTINCT customer_id)=2800`, and based on the volatility value at the `ceil(2800*0.75)=2100`th position in the sorted list, confirm a threshold of `customer_margin_volatility≥0.28717` (tolerance ±0.00001). The output should show a high-volatility customer count of `701` (tolerance ±1), and this group's share of total revenue and gross profit should be `30.57%` and `30.68%` respectively (tolerance ±0.10 pp). Must list a comparison of original labels and parsed results for ≥5 sample customers (e.g., `CUS92807524262`). Strictly prohibit circumventing validation by deleting or modifying the original text.
- Sub-standard 1.1.A.3 [2 Points | Conclusiveness]: Clarify that customers with multiple invoices must be aggregated before downstream calculations; do not remove duplicate rows via deduplication. The generation path for the list of high-volatility group IDs (SQL snippet or script function) must be recorded to support re-running subsequent feature calculations.

## Requirement 2: Volatility Intensity Quantification and Time Window Statistics (Up to 12 points for this requirement)
### Standard 2.1: 12-Month Gross Profit Coefficient of Variation Calculation (Up to 6 points)
#### Path 2.1.A [6 Points | Monthly Aggregation]
- Sub-standard 2.1.A.1 [1 Point | Completeness]: Fix the rolling window to [2024-10-15, 2025-10-14], aggregate the monthly gross profit for high-volatility customers by `strftime('%Y-%m', transaction_date)`, and state `CV = σ(monthly_gross_profit) / μ(monthly_gross_profit)`. For single-month samples, the output CV must be `0`.
- Sub-standard 2.1.A.2 [4 Points | Accuracy]: Reproduce monthly series for `671` customers (tolerance ±2), with a sample mean `CV` of `0.2275`, median of `0.2168`, quartiles `{Q1=0.0000, Q3=0.3728}`, and a maximum value of `0.8809` (all with tolerance ±0.0005). Must list the monthly series and statistics for ≥2 typical customers, e.g., `CUS92807524262`: monthly gross profit {2025-01=6032.24, 2025-05=201.59, 2025-07=2051.01} → `μ=2761.61`, `σ=2432.81`, `CV=0.88094`; `CUS33191341362`: {2024-12=3674.62, 2025-04=1271.16, 2025-06=787.06} → `CV=0.66075`.
- Sub-standard 2.1.A.3 [1 Point | Conclusiveness]: Note that the average number of monthly hits is `2.27`, and `CV=0` primarily comes from single-month samples (the proportion must be stated). During modeling, zero-variance cases must be handled (e.g., imputation/smoothing) to avoid distortion.

### Standard 2.2: Quarterly QoQ Growth Variance Calculation (Up to 6 points)
#### Path 2.2.A [6 Points | Reporting Quarter Basis]
- Sub-standard 2.2.A.1 [1 Point | Completeness]: Explain that using `revenue_year`+`revenue_quarter` as the grouping key, the quarterly invoice totals for the same customer are summed before calculating `QoQ = (rev_t - rev_{t-1})/rev_{t-1}`. If the previous quarter's amount is 0, skip the pair.
- Sub-standard 2.2.A.2 [4 Points | Accuracy]: Confirm that `491` customers have at least one QoQ value (tolerance ±2), with a mean QoQ variance of `0.08995`, median of `0.00000`, upper quartile of `0.05286`, and a maximum value of `1.71461` (all with tolerance ±0.0005). Example: `CUS29788258829`'s quarterly series {2023-Q3:15077.52, 2023-Q4:3842.90, 2024-Q3:9673.41, 2025-Q3:4200.67} → QoQ {-0.7451, +1.5172, -0.5658}, variance `1.05435`; `CUS16315388822` → variance `0.54781`.
- Sub-standard 2.2.A.3 [1 Point | Conclusiveness]: State that quarterly labels and transaction dates may involve cross-year allocation (original accounting labels must be preserved), and propose a strategy for imputing values for customers lacking ≥2 QoQ data points (e.g., setting to 0 or marking as missing).

## Requirement 3: Correlation Analysis of Behavioral Characteristics and Lifecycle (Up to 12 points for this requirement)
### Standard 3.1: RFM & Lifecycle Exposure Rate (Up to 6 points)
#### Path 3.1.A [6 Points | Distribution Comparison]
- Sub-standard 3.1.A.1 [1 Point | Completeness]: Explain that `quickbooks__customer_analytics` is used to perform an exact match of the high-volatility list with all customers by `customer_id`, and to calculate the distribution of `rfm_segment` and `lifecycle_stage`. Missing values are uniformly classified as `UNKNOWN`.
- Sub-standard 3.1.A.2 [4 Points | Accuracy]: Reproduce the exposure rates for key segments: `Champions` 133/480 → 27.71%, `New Customers` 129/485 → 26.60%, `Loyal Customers` 119/491 → 24.24%, `At Risk` 109/448 → 24.33% (tolerance ±0.20 pp for each). The lifecycle distribution must be given as `{New Customer:206/754=27.32%, Loyal Customer:180/692=26.01%, Mature:158/681=23.20%, Growing:157/673=23.33%}`.
- Sub-standard 3.1.A.3 [1 Point | Conclusiveness]: Point out that the high-volatility group shows elevated exposure in both high-value (Champions) and at-risk (At Risk) segments, suggesting the need for distinct, "value-driven" vs. "risk-driven" operational strategies.

### Standard 3.2: Payment Behavior and Trend Characteristics (Up to 6 points)
#### Path 3.2.A [6 Points | Dual-Metric Correlation]
- Sub-standard 3.2.A.1 [1 Point | Completeness]: Construct a joined table of payment behavior (Excellent/Good/Average/Poor) and the two volatility metrics: `CV` from monthly gross profit and `Var_qoq` from QoQ variance. Negative `revenue_trend_correlation` values must be flagged.
- Sub-standard 3.2.A.2 [4 Points | Accuracy]: Validate the mean `CV` `{Excellent:0.19608, Good:0.23916, Average:0.24589, Poor:0.22982}` and mean `Var_qoq` `{Excellent:0.07920, Good:0.11404, Average:0.07068, Poor:0.09584}` (tolerance ±0.001). Must state the payment behavior counts within the high-volatility group `{Excellent:178, Good:176, Average:176, Poor:171}` (tolerance ±1).
- Sub-standard 3.2.A.3 [1 Point | Conclusiveness]: Highlight the anomalous link where `payment_behavior` is 'Good' but variance is highest. Combined with a mean `revenue_trend_correlation` of `0.0043` (vs. all-customer mean of `-0.0150`), this suggests high-volatility customers still have growth potential. A penalty term for trend direction should be introduced in the scoring model.

## Requirement 4: Financial Impact and Risk Exposure Assessment (Up to 12 points for this requirement)
### Standard 4.1: Impact of High-Volatility Customers on the Business Dashboard (Up to 6 points)
#### Path 4.1.A [6 Points | Monthly Alignment]
- Sub-standard 4.1.A.1 [1 Point | Completeness]: Define a monthly share = (High-volatility customers' invoice total for the month) ÷ (Total invoice total for the month), and join this with the corresponding month's `business_health_score`, `collection_rate_percentage`, and `collection_per_invoice` from `quickbooks__financial_dashboard`. A total of `13` months (Oct 2024 to Oct 2025) should be aligned.
- Sub-standard 4.1.A.2 [4 Points | Accuracy]: Validate an average share of `30.85%` (tolerance ±0.10 pp), a median share of `31.11%`, and a range of `[22.08%, 39.86%]`. Calculate Pearson correlations `corr(share, health)=-0.3693` and `corr(share, collection)=-0.1507` (tolerance ±0.005). Must provide a sample monthly comparison (e.g., March 2025: share 39.86% → health score 82.44, collection rate 87.81).
- Sub-standard 4.1.A.3 [1 Point | Conclusiveness]: Compare the mean values for high-share vs. low-share groups: `collection_rate` is `89.66%` vs `88.85%` respectively, and `business_health_score` is `82.98` vs `83.32` (tolerance ±0.05). State the management implication that a high share slightly drags down the health score.

### Standard 4.2: Analysis of Balance Sheet Accounts Receivable Structure (Up to 6 points)
#### Path 4.2.A [6 Points | Aging Distribution]
- Sub-standard 4.2.A.1 [1 Point | Completeness]: In `quickbooks__balance_sheet`, filter for receivable-related `account_sub_type` (Current/Past Due/Long Overdue), and state the aggregation logic `SUM(amount)`.
- Sub-standard 4.2.A.2 [4 Points | Accuracy]: Verify the amounts and proportions: `Current (0-30 days)=78,727,087.46`, `Past Due (31-60 days)=19,691,998.75`, `Past Due (61-90 days)=7,825,769.45`, `Long Overdue (90+ days)=2,771,707.69`, for a total receivable of `109,016,563.35`. The corresponding proportions are {72.22%, 18.06%, 7.18%, 2.54%} (amount tolerance ±100, proportion tolerance ±0.05 pp).
- Sub-standard 4.2.A.3 [1 Point | Conclusiveness]: Point out that overdue accounts >60 days total 9.72%. Combined with the high-volatility customers' revenue share of 30%+, this implies the need to add receivable aging limits or monitoring indicators to the risk score.

## Requirement 5: Volatility-Driven Multi-Dimensional Risk Score and Operational Strategies (Up to 12 points for this requirement)
### Standard 5.1: Risk Score Formula and Thresholds (Up to 6 points)
#### Path 5.1.A [6 Points | Linear Weighting]
- Sub-standard 5.1.A.1 [1 Point | Completeness]: Explicitly provide the scoring formula:
  `RiskScore = 0.40·min(CV/0.88094,1) + 0.20·min(Var_qoq/0.50,1) + 0.15·PayPenalty + 0.15·RFMPenalty + 0.10·TrendPenalty`.
  Where `PayPenalty` maps to {Excellent=0.00, Good=0.25, Average=0.50, Poor=0.80}, `RFMPenalty` maps to {Champions=0.20, Loyal=0.40, Potential Loyalists=0.35, New Customers=0.50, Need Attention=0.70, At Risk=0.80, About To Sleep=0.75, Promising=0.45, Hibernating=0.85, Lost=1.00, others=0.50}, and `TrendPenalty=0.50` if `revenue_trend_correlation<0`, otherwise 0.
- Sub-standard 5.1.A.2 [4 Points | Accuracy]: Re-calculate the example `CUS92807524262`: `CV=0.88094`, `Var_qoq=0.30727`, `PayPenalty=0.80`, `RFMPenalty=0.70`, `TrendPenalty=0.10` → `RiskScore=0.7479` (tolerance ±0.005). Calculate the overall mean `0.2710`, and P90 `0.4498` (tolerance ±0.002), and segment based on thresholds `{High ≥0.45, Medium 0.30-0.45, Low <0.30}`. Must provide the sample counts per tier `{High:49, Medium:171, Low:481}` (tolerance ±1).
- Sub-standard 5.1.A.3 [1 Point | Conclusiveness]: Describe the action for each risk tier: High-risk (≥0.45) triggers a special review within 7 days + an accounts receivable aging check; Medium-risk maintains a bi-weekly cadence; Low-risk maintains a quarterly review. The version number or run log of the scoring script must be recorded.

### Standard 5.2: Segmented Insights and Operational Implementation (Up to 6 points)
#### Path 5.2.A [6 Points | Strategy Dashboard]
- Sub-standard 5.2.A.1 [1 Point | Completeness]: Output a dashboard `{Risk Tier, Primary RFM, Primary Payment Behavior, n_accounts, avg_CV, avg_Var_qoq}`, noting the data sources (the above scoring results + behavioral labels).
- Sub-standard 5.2.A.2 [4 Points | Accuracy]: Verify key anchors: The top two RFM segments for the High-risk tier are `{At Risk:17, Need Attention:11}` and payment behaviors are `{Poor:28, Average:20}`; for Medium-risk `{At Risk:36, Loyal:30, New:29}`; for Low-risk `{Champions:109}`. The average `CV` and `Var_qoq` must be consistent with previously validated values (tolerance ±0.005).
- Sub-standard 5.2.A.3 [1 Point | Conclusiveness]: Formulate action plans for each segment, for example, for High-risk → "Within 30 days, reduce repeat invoicing volatility from ≥0.30 to ≤0.20, and decrease receivables >60 days by 2 pp from baseline." Requires assigning owners, frequency, and review metrics (with the goal of reducing the median risk score).
